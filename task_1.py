import math

def calculate_force_and_error():
    """
    Решение задачи 5.16.1
    Расчет результирующей силы на шарик массой 9г, скатывающийся по наклонной плоскости под углом 15°,
    с анализом погрешностей, как указано в задании.
    """
    
    # Исходные значения
    m1 = 9.0           # масса в граммах
    alpha1 = 15.0      # угол в градусах
    g1 = 9.80          # ускорение свободного падения в м/с² (значение для Рима)
    
    # Шаг 1: Преобразование угла в радианы
    alpha = alpha1 * math.pi / 180.0
    
    # Шаг 2: Расчет силы F₁ = m₁ * g₁ * cos(α) / 1000
    F1 = m1 * g1 * math.cos(alpha) / 1000
    
    # Шаг 3: Расчет относительных погрешностей
    d_alpha = 0.5 / alpha1        # относительная погрешность для угла
    d_m = 0.5 / m1                # относительная погрешность для массы
    d_g = 0.02 / g1               # относительная погрешность для ускорения свободного падения
    
    # Шаг 4: Расчет относительной погрешности для силы
    d_F = d_m + d_g + math.tan(alpha) * d_alpha
    
    # Шаг 5: Расчет абсолютной погрешности
    delta_F = F1 * d_F
    
    # Шаг 6: Вывод результатов
    print("Решение задачи 5.16.1: Расчет результирующей силы")
    print("=" * 50)
    print(f"Исходные данные:")
    print(f"  Масса m = {m1} г = {m1/1000:.4f} кг")
    print(f"  Угол α = {alpha1}° = {alpha:.4f} рад")
    print(f"  Ускорение свободного падения g = {g1} м/с²")
    print()
    print(f"Расчет силы:")
    print(f"  F = m * g * cos(α) = {m1/1000:.4f} * {g1} * cos({alpha:.4f})")
    print(f"  F = {F1:.6f} Н")
    print()
    print(f"Анализ погрешностей:")
    print(f"  Относительная погрешность для массы: d_m = 0.5 / {m1} = {d_m:.6f}")
    print(f"  Относительная погрешность для ускорения свободного падения: d_g = 0.02 / {g1} = {d_g:.6f}")
    print(f"  Относительная погрешность для угла: d_α = 0.5 / {alpha1} = {d_alpha:.6f}")
    print()
    print(f"  Относительная погрешность для силы:")
    print(f"  dF = d_m + d_g + tg(α) * d_α")
    print(f"     = {d_m:.6f} + {d_g:.6f} + tg({alpha:.4f}) * {d_alpha:.6f}")
    print(f"     = {d_m:.6f} + {d_g:.6f} + {math.tan(alpha):.4f} * {d_alpha:.6f}")
    print(f"     = {d_m:.6f} + {d_g:.6f} + {math.tan(alpha) * d_alpha:.6f}")
    print(f"  dF = {d_F:.6f} (≈ {d_F*100:.2f}%)")
    print()
    print(f"  Абсолютная погрешность:")
    print(f"  ΔF = F * dF = {F1:.6f} * {d_F:.6f}")
    print(f"  ΔF = {delta_F:.6f} Н")
    print()
    print(f"Итоговый результат:")
    print(f"  F = {F1:.6f} ± {delta_F:.6f} Н")
    print(f"  или F = ({F1*1000:.3f} ± {delta_F*1000:.3f}) × 10⁻³ Н")
    
    return F1, delta_F

# Запуск расчета
if __name__ == "__main__":
    force, error = calculate_force_and_error()